import{Q as I}from"./QBtn.f02d309f.js";import{_ as m,y as i,z as d,C as $,ad as A,D as B,r as v,o as w,F as M,ac as L,G as z,H as D,ae as S,I as V,af as W,ag as P,j as R}from"./index.181ca923.js";const j={},Q={class:"game-tile"},X={class:"game-tile__text"};function H(h,f){return i(),d("div",Q,[$("div",X,[A(h.$slots,"default",{},void 0,!0)])])}var U=m(j,[["render",H],["__scopeId","data-v-6f6dfcf6"]]);const b={class:"game-area__tiles"},q=B({__name:"GameArea",setup(h){const f=["#8EFF00","#741926","#00FFBB","#ED1313","#FCCE00"],g=["\u58EB","\u95E8","\u4EBA","\u5973","\u5B50"],c=v([]),T=t=>{for(let l=t.length-1;l>0;l--){let s=Math.floor(Math.random()*(l+1));[t[l],t[s]]=[t[s],t[l]]}};T(f);const E=g.map((t,l)=>({letter:t,color:f[l]}));for(let t=0;t<36;t++)T(E),c.value.push({x:Math.floor(t%6),y:Math.floor(t/6),diffY:0,...E[0]});const _=v(null),n=v(null),r=v(null),y=v(""),x=v(""),C=(t,l)=>{t.touches?_.value={x:t.touches[0].clientX,y:t.touches[0].clientY}:_.value={x:t.x,y:t.y},r.value=t.target,n.value=l,y.value=r.value.style.left,x.value=r.value.style.top},k=t=>{let l={};t.touches?l={x:t.touches[0].clientX,y:t.touches[0].clientY}:l={x:t.x,y:t.y};const s={x:l.x-_.value.x,y:l.y-_.value.y};if(Math.abs(s.x)>Math.abs(s.y)){const a=s.x*100/window.innerWidth;Math.abs(a)<10.8&&(r.value.style.left=`calc(${y.value} + ${s.x*100/window.innerWidth}vw)`),r.value.style.top=x.value}else{const a=s.y*100/window.innerWidth;Math.abs(a)<10.8&&(r.value.style.top=`calc(${x.value} + ${s.y*100/window.innerWidth}vw)`),r.value.style.left=y.value}r.value.style.zIndex=1,r.value.style.transition="none"},F=v(0),G=()=>{if(!r.value)return;r.value.style.transition="",r.value.style.zIndex=0;const t=parseFloat(r.value.style.left.split("(")[1]),l=parseFloat(r.value.style.top.split("(")[1]);let s=[];isNaN(t)||(t-parseFloat(y.value)>0?s=c.value.filter(e=>e.x===n.value.x+1&&e.y===n.value.y):s=c.value.filter(e=>e.x===n.value.x-1&&e.y===n.value.y)),isNaN(l)||(l-parseFloat(x.value)>0?s=c.value.filter(e=>e.x===n.value.x&&e.y===n.value.y+1):s=c.value.filter(e=>e.x===n.value.x&&e.y===n.value.y-1));const a=s.find(e=>!e.isRemoved);if(a){const e={x:n.value.x,y:n.value.y};n.value.y=a.y,n.value.x=a.x,a.x=e.x,a.y=e.y}else F.value++;p()};w(()=>{document.addEventListener("touchend",G)});const p=()=>{setTimeout(N,500)};w(p);const N=()=>{const t=[];for(let a=0;a<6;a++)t.push(c.value.filter(e=>e.y===a&&!e.isRemoved)),t.push(c.value.filter(e=>e.x===a&&!e.isRemoved));t.forEach(a=>{let e=[];a.sort(function(o,u){return o.x>u.x&&o.y===u.y||o.y>u.y&&o.x===u.x?1:o.x<u.x&&o.y===u.y||o.y<u.y&&o.x===u.x?-1:0}),a.forEach(o=>{if(!e.length){e.push(o);return}const u=e[e.length-1];o.letter===u.letter&&(o.x-u.x===1||o.y-u.y===1)?e.push(o):e=[o],e.length>2&&e.forEach(Y=>{Y.preRemoved=!0})})}),c.value.filter(a=>a.preRemoved).forEach(a=>{const e=c.value.filter(o=>o.y<a.y&&o.x===a.x&&!o.isRemoved&&!o.preRemoved);e.length&&e.forEach(o=>{o.diffY+=1}),a.preRemoved=!1,a.isRemoved=!0});const s=c.value.filter(a=>a.diffY);s.length&&(s.forEach(a=>{a.y=a.y+a.diffY,a.diffY=0}),p())};return(t,l)=>(i(),d("div",{key:F.value,class:"game-area"},[$("div",b,[(i(!0),d(M,null,L(c.value,(s,a)=>(i(),d(M,{key:a+s.letter},[s.isRemoved?P("",!0):(i(),z(U,{key:0,style:W({left:`${s.x*10.83+s.x*1.44}vw`,top:`${s.y*10.83+s.y*1.44}vw`,color:s.color}),onTouchstart:e=>C(e,s),onTouchmove:k,"data-letter":s.letter,"data-x":s.x,"data-y":s.y},{default:D(()=>[S(V(s.letter),1)]),_:2},1032,["style","onTouchstart","data-letter","data-x","data-y"]))],64))),128))])]))}});var J=m(q,[["__scopeId","data-v-3c0dbd22"]]);const K={class:"game"},O=B({__name:"GamePage",setup(h){return(f,g)=>(i(),d("div",K,[R(I,{class:"game__back",to:"/",flat:""}),R(J)]))}});var te=m(O,[["__scopeId","data-v-2bde8950"]]);export{te as default};
