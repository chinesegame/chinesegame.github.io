import{Q as I}from"./QBtn.4653558d.js";import{_ as m,y as i,z as d,C as B,ad as A,D as C,r as v,o as w,F as M,ac as L,G as z,H as D,ae as S,I as V,af as W,ag as P,j as $}from"./index.44205410.js";const j={},Q={class:"game-tile"},X={class:"game-tile__text"};function H(h,f){return i(),d("div",Q,[B("div",X,[A(h.$slots,"default",{},void 0,!0)])])}var q=m(j,[["render",H],["__scopeId","data-v-6f6dfcf6"]]);const J={class:"game-area__tiles"},K=C({__name:"GameArea",setup(h){const f=["#8EFF00","#741926","#00FFBB","#ED1313","#FCCE00"],g=["\u58EB","\u95E8","\u4EBA","\u5973","\u5B50"],c=v([]),T=a=>{for(let o=a.length-1;o>0;o--){let t=Math.floor(Math.random()*(o+1));[a[o],a[t]]=[a[t],a[o]]}};T(f);const E=g.map((a,o)=>({letter:a,color:f[o]}));for(let a=0;a<36;a++)T(E),c.value.push({x:Math.floor(a%6),y:Math.floor(a/6),diffY:0,...E[0]});const _=v(null),r=v(null),n=v(null),y=v(""),x=v(""),k=(a,o)=>{a.touches?_.value={x:a.touches[0].clientX,y:a.touches[0].clientY}:_.value={x:a.x,y:a.y},n.value=a.target,r.value=o,y.value=n.value.style.left,x.value=n.value.style.top},G=a=>{let o={};a.touches?o={x:a.touches[0].clientX,y:a.touches[0].clientY}:o={x:a.x,y:a.y};const t={x:o.x-_.value.x,y:o.y-_.value.y};if(Math.abs(t.x)>Math.abs(t.y)){const e=t.x*100/window.innerWidth;Math.abs(e)<10.8&&(n.value.style.left=`calc(${y.value} + ${t.x*100/window.innerWidth}vw)`),n.value.style.top=x.value}else{const e=t.y*100/window.innerWidth;Math.abs(e)<10.8&&(n.value.style.top=`calc(${x.value} + ${t.y*100/window.innerWidth}vw)`),n.value.style.left=y.value}n.value.style.zIndex=1,n.value.style.transition="none"},F=v(0),R=()=>{if(!n.value)return;n.value.style.transition="",n.value.style.zIndex=0;const a=parseFloat(n.value.style.left.split("(")[1]),o=parseFloat(n.value.style.top.split("(")[1]);let t=null;if(isNaN(a)||(a-parseFloat(y.value)>0?t=c.value.find(e=>e.x===r.value.x+1&&e.y===r.value.y):t=c.value.find(e=>e.x===r.value.x-1&&e.y===r.value.y)),isNaN(o)||(o-parseFloat(x.value)>0?t=c.value.find(e=>e.x===r.value.x&&e.y===r.value.y+1):t=c.value.find(e=>e.x===r.value.x&&e.y===r.value.y-1)),t&&!t.isRemoved){const e={x:r.value.x,y:r.value.y};r.value.y=t.y,r.value.x=t.x,t.x=e.x,t.y=e.y}else F.value++;p()};w(()=>{document.addEventListener("touchend",R)});const p=()=>{setTimeout(N,500)};w(p);const N=()=>{const a=[];for(let e=0;e<6;e++)a.push(c.value.filter(l=>l.y===e&&!l.isRemoved)),a.push(c.value.filter(l=>l.x===e&&!l.isRemoved));a.forEach(e=>{let l=[];e.sort(function(s,u){return s.x>u.x&&s.y===u.y||s.y>u.y&&s.x===u.x?1:s.x<u.x&&s.y===u.y||s.y<u.y&&s.x===u.x?-1:0}),e.forEach(s=>{if(!l.length){l.push(s);return}const u=l[l.length-1];s.letter===u.letter&&(s.x-u.x===1||s.y-u.y===1)?l.push(s):l=[s],l.length>2&&l.forEach(Y=>{Y.preRemoved=!0})})}),c.value.filter(e=>e.preRemoved).forEach(e=>{const l=c.value.filter(s=>s.y<e.y&&s.x===e.x);l.length&&l.forEach(s=>{s.diffY+=1}),e.preRemoved=!1,e.isRemoved=!0});const t=c.value.filter(e=>e.diffY);t.length&&(t.forEach(e=>{e.y=e.y+e.diffY,e.diffY=0}),p())};return(a,o)=>(i(),d("div",{key:F.value,class:"game-area"},[B("div",J,[(i(!0),d(M,null,L(c.value,(t,e)=>(i(),d(M,{key:e+t.letter},[t.isRemoved?P("",!0):(i(),z(q,{key:0,style:W({left:`${t.x*10.83+t.x*1.44}vw`,top:`${t.y*10.83+t.y*1.44}vw`,color:t.color}),onTouchstart:l=>k(l,t),onTouchmove:G,"data-letter":t.letter,"data-x":t.x,"data-y":t.y},{default:D(()=>[S(V(t.letter),1)]),_:2},1032,["style","onTouchstart","data-letter","data-x","data-y"]))],64))),128))])]))}});var O=m(K,[["__scopeId","data-v-96c51e68"]]);const U={class:"game"},Z=C({__name:"GamePage",setup(h){return(f,g)=>(i(),d("div",U,[$(I,{class:"game__back",to:"/",flat:""}),$(O)]))}});var te=m(Z,[["__scopeId","data-v-2bde8950"]]);export{te as default};
