import{Q as I}from"./QBtn.e9e307da.js";import{_ as m,y as i,z as d,C as B,ad as A,D as C,r as v,o as w,F as M,ac as L,G as z,H as D,ae as S,I as V,af as W,ag as P,j as $}from"./index.067baf47.js";const b={},j={class:"game-tile"},Q={class:"game-tile__text"};function X(h,f){return i(),d("div",j,[B("div",Q,[A(h.$slots,"default",{},void 0,!0)])])}var H=m(b,[["render",X],["__scopeId","data-v-6f6dfcf6"]]);const U={class:"game-area__tiles"},q=C({__name:"GameArea",setup(h){const f=["#8EFF00","#741926","#00FFBB","#ED1313","#FCCE00"],g=["\u58EB","\u95E8","\u4EBA","\u5973","\u5B50"],c=v([]),T=t=>{for(let o=t.length-1;o>0;o--){let s=Math.floor(Math.random()*(o+1));[t[o],t[s]]=[t[s],t[o]]}};T(f);const E=g.map((t,o)=>({letter:t,color:f[o]}));for(let t=0;t<36;t++)T(E),c.value.push({x:Math.floor(t%6),y:Math.floor(t/6),diffY:0,...E[0]});const _=v(null),n=v(null),r=v(null),y=v(""),x=v(""),k=(t,o)=>{t.touches?_.value={x:t.touches[0].clientX,y:t.touches[0].clientY}:_.value={x:t.x,y:t.y},r.value=t.target,n.value=o,y.value=r.value.style.left,x.value=r.value.style.top},G=t=>{let o={};t.touches?o={x:t.touches[0].clientX,y:t.touches[0].clientY}:o={x:t.x,y:t.y};const s={x:o.x-_.value.x,y:o.y-_.value.y};if(Math.abs(s.x)>Math.abs(s.y)){const a=s.x*100/window.innerWidth;Math.abs(a)<10.8&&(r.value.style.left=`calc(${y.value} + ${s.x*100/window.innerWidth}vw)`),r.value.style.top=x.value}else{const a=s.y*100/window.innerWidth;Math.abs(a)<10.8&&(r.value.style.top=`calc(${x.value} + ${s.y*100/window.innerWidth}vw)`),r.value.style.left=y.value}r.value.style.zIndex=1,r.value.style.transition="none"},F=v(0),R=()=>{if(!r.value)return;r.value.style.transition="",r.value.style.zIndex=0;const t=parseFloat(r.value.style.left.split("(")[1]),o=parseFloat(r.value.style.top.split("(")[1]);let s=[];isNaN(t)||(t-parseFloat(y.value)>0?s=c.value.filter(e=>e.x===n.value.x+1&&e.y===n.value.y):s=c.value.filter(e=>e.x===n.value.x-1&&e.y===n.value.y)),isNaN(o)||(o-parseFloat(x.value)>0?s=c.value.filter(e=>e.x===n.value.x&&e.y===n.value.y+1):s=c.value.filter(e=>e.x===n.value.x&&e.y===n.value.y-1));const a=s.find(e=>!e.isRemoved);if(a){const e={x:n.value.x,y:n.value.y};n.value.y=a.y,n.value.x=a.x,a.x=e.x,a.y=e.y}else F.value++;p()};w(()=>{document.addEventListener("touchend",R)});const p=()=>{setTimeout(N,500)};w(p);const N=()=>{const t=[];for(let a=0;a<6;a++)t.push(c.value.filter(e=>e.y===a&&!e.isRemoved)),t.push(c.value.filter(e=>e.x===a&&!e.isRemoved));t.forEach(a=>{let e=[];a.sort(function(l,u){return l.x>u.x&&l.y===u.y||l.y>u.y&&l.x===u.x?1:l.x<u.x&&l.y===u.y||l.y<u.y&&l.x===u.x?-1:0}),a.forEach(l=>{if(!e.length){e.push(l);return}const u=e[e.length-1];l.letter===u.letter&&(l.x-u.x===1||l.y-u.y===1)?e.push(l):e=[l],e.length>2&&e.forEach(Y=>{Y.preRemoved=!0})})}),c.value.filter(a=>a.preRemoved).forEach(a=>{const e=c.value.filter(l=>l.y<a.y&&l.x===a.x);e.length&&e.forEach(l=>{l.diffY+=1}),a.preRemoved=!1,a.isRemoved=!0});const s=c.value.filter(a=>a.diffY);s.length&&(s.forEach(a=>{a.y=a.y+a.diffY,a.diffY=0}),p())};return(t,o)=>(i(),d("div",{key:F.value,class:"game-area"},[B("div",U,[(i(!0),d(M,null,L(c.value,(s,a)=>(i(),d(M,{key:a+s.letter},[s.isRemoved?P("",!0):(i(),z(H,{key:0,style:W({left:`${s.x*10.83+s.x*1.44}vw`,top:`${s.y*10.83+s.y*1.44}vw`,color:s.color}),onTouchstart:e=>k(e,s),onTouchmove:G,"data-letter":s.letter,"data-x":s.x,"data-y":s.y},{default:D(()=>[S(V(s.letter),1)]),_:2},1032,["style","onTouchstart","data-letter","data-x","data-y"]))],64))),128))])]))}});var J=m(q,[["__scopeId","data-v-a340bbb2"]]);const K={class:"game"},O=C({__name:"GamePage",setup(h){return(f,g)=>(i(),d("div",K,[$(I,{class:"game__back",to:"/",flat:""}),$(J)]))}});var te=m(O,[["__scopeId","data-v-2bde8950"]]);export{te as default};
